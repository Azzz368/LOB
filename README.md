# Library of Babel - è¯—æ­Œè½¬ç­’é¡¹ç›®

ä¸€ä¸ªåŸºäº Three.js çš„äº¤äº’å¼è¯—æ­Œå±•ç¤ºé¡¹ç›®ï¼Œé…å¤‡ç”¨æˆ·æŠ•ç¨¿ç³»ç»Ÿå’Œç®¡ç†å‘˜å®¡æ ¸åå°ã€‚

## âœ¨ åŠŸèƒ½ç‰¹æ€§

### å‰ç«¯å±•ç¤º
- ğŸ¨ 3D æ—‹è½¬è½¬ç­’å±•ç¤ºè¯—æ­Œæ–‡æœ¬
- ğŸ–±ï¸ ç‚¹å‡»å•è¯æ˜¾ç¤ºå®Œæ•´è¯—å¥ï¼ˆä¸­è‹±åŒè¯­ï¼‰
- ğŸ”„ è‡ªåŠ¨æ¯æ—¥æ›´æ–°ï¼ˆåˆå¤œåé¦–æ¬¡è®¿é—®ï¼‰

### ç”¨æˆ·æŠ•ç¨¿
- ğŸ“ å…¬å¼€æŠ•ç¨¿è¡¨å•ï¼šä»»ä½•äººéƒ½å¯ä»¥æäº¤è¯—æ­Œ
- ğŸŒ æ”¯æŒè‹±æ–‡ã€ä¸­æ–‡ã€åŒè¯­è¯—æ­Œ
- âœ‰ï¸ å¯é€‰ç•™ä¸‹è”ç³»æ–¹å¼

### ç®¡ç†å‘˜åå°
- ğŸ” å¯†ç ä¿æŠ¤çš„ç®¡ç†ç•Œé¢
- ğŸ‘€ æŸ¥çœ‹æ‰€æœ‰ç”¨æˆ·æäº¤
- âœ… å®¡æ ¸é€šè¿‡/æ‹’ç»åŠŸèƒ½
- ğŸ“Š å®æ—¶ç»Ÿè®¡æ•°æ®
- ğŸ’¾ æ•°æ®å­˜å‚¨åœ¨ Netlify Blob Storeï¼ˆæ— éœ€å¤–éƒ¨æ•°æ®åº“ï¼‰

## ğŸ“¦ æŠ€æœ¯æ ˆ

- **å‰ç«¯**: Three.js + Vite
- **åç«¯**: Netlify Functions
- **å­˜å‚¨**: Netlify Blob Store
- **éƒ¨ç½²**: Netlify

## ğŸš€ éƒ¨ç½²æ­¥éª¤

### 1. å®‰è£…ä¾èµ–

```bash
npm install
```

### 2. æœ¬åœ°å¼€å‘

```bash
npm run dev
```

è®¿é—®é¡µé¢ï¼š
- å‰ç«¯å±•ç¤ºï¼š`http://localhost:5173`
- ç”¨æˆ·æŠ•ç¨¿ï¼š`http://localhost:5173/submit.html`
- ç®¡ç†åå°ï¼š`http://localhost:5173/admin.html`

### 3. éƒ¨ç½²åˆ° Netlify

#### æ–¹æ³• Aï¼šé€šè¿‡ Git è‡ªåŠ¨éƒ¨ç½²ï¼ˆæ¨èï¼‰

1. å°†ä»£ç æ¨é€åˆ° GitHub/GitLab
2. ç™»å½• [Netlify](https://app.netlify.com)
3. ç‚¹å‡» "Add new site" â†’ "Import an existing project"
4. è¿æ¥ä½ çš„ Git ä»“åº“
5. æ„å»ºè®¾ç½®ä¼šè‡ªåŠ¨ä» `netlify.toml` è¯»å–
6. ç‚¹å‡» "Deploy site"

#### æ–¹æ³• Bï¼šæ‰‹åŠ¨éƒ¨ç½²

```bash
npm run build
# ç„¶åå°† dist æ–‡ä»¶å¤¹æ‹–æ‹½åˆ° Netlify çš„éƒ¨ç½²ç•Œé¢
```

### 4. é…ç½®ç¯å¢ƒå˜é‡ï¼ˆå¿…éœ€ï¼‰

éƒ¨ç½²å®Œæˆåï¼Œåœ¨ Netlify æ§åˆ¶å°é…ç½®ç¯å¢ƒå˜é‡ï¼š

1. è¿›å…¥ä½ çš„ç«™ç‚¹ï¼ˆä¾‹å¦‚ï¼š`libraryofbable.netlify.app`ï¼‰
2. ç‚¹å‡» **Site settings** â†’ **Environment variables**
3. æ·»åŠ ä»¥ä¸‹å˜é‡ï¼š

| å˜é‡å | è¯´æ˜ | ç¤ºä¾‹å€¼ | æ˜¯å¦å¿…éœ€ |
|--------|------|--------|---------|
| `ADMIN_PASSWORD` | ç®¡ç†å‘˜åå°å¯†ç  | `your-secure-password-123` | **å¿…éœ€** |
| `POEMS_JSON_URL` | ï¼ˆå¯é€‰ï¼‰å¤–éƒ¨ JSON æ•°æ®æº | `https://example.com/poems.json` | å¯é€‰ |

4. ç‚¹å‡» **Deploys** â†’ **Trigger deploy** é‡æ–°éƒ¨ç½²ä½¿ç¯å¢ƒå˜é‡ç”Ÿæ•ˆ

## ğŸ“– ä½¿ç”¨æŒ‡å—

### ç³»ç»Ÿæ¶æ„

```
ç”¨æˆ·æŠ•ç¨¿ (submit.html)
    â†“
æäº¤åˆ° Netlify Function (submit-poem.js)
    â†“
ä¿å­˜åˆ° Blob Store (çŠ¶æ€: pending)
    â†“
ç®¡ç†å‘˜ç™»å½•åå° (admin.html)
    â†“
å®¡æ ¸é€šè¿‡ â†’ å‘å¸ƒåˆ°å‰ç«¯å±•ç¤º
å®¡æ ¸æ‹’ç» â†’ æ ‡è®°ä¸ºå·²æ‹’ç»
    â†“
å‰ç«¯è‡ªåŠ¨è¯»å–å·²å‘å¸ƒå†…å®¹ (poems.js)
```

### 1. å‰ç«¯è®¿é—®

è®¿é—®ä½ çš„ Netlify åŸŸåï¼ˆä¾‹å¦‚ï¼š`https://libraryofbable.netlify.app`ï¼‰ï¼š

- **é¼ æ ‡æ‚¬åœ**è½¬ç­’ï¼šæš‚åœæ—‹è½¬ï¼Œé«˜äº®å•è¯
- **ç‚¹å‡»å•è¯**ï¼šåœ¨å·¦ä¾§é¢æ¿æ˜¾ç¤ºå®Œæ•´è¯—å¥ï¼ˆä¸­è‹±å¯¹ç…§ï¼‰
- **æ‚¬åœé¡¶éƒ¨/åº•éƒ¨**ï¼šè½¬ç­’ä¸Šä¸‹æ»šåŠ¨

### 2. ç”¨æˆ·æŠ•ç¨¿

è®¿é—® `https://ä½ çš„åŸŸå.netlify.app/submit.html`ï¼š

1. é€‰æ‹©è¯—æ­Œè¯­è¨€ï¼ˆè‹±æ–‡/ä¸­æ–‡/åŒè¯­ï¼‰
2. å¡«å†™ä½œè€…å’Œè¯—å¥å†…å®¹
3. ï¼ˆå¯é€‰ï¼‰æ·»åŠ ä¸­æ–‡ç¿»è¯‘å¯¹ç…§
4. ï¼ˆå¯é€‰ï¼‰ç•™ä¸‹ä½ çš„åå­—å’Œé‚®ç®±
5. ç‚¹å‡» **æäº¤è¯—æ­Œ**
6. ç­‰å¾…ç®¡ç†å‘˜å®¡æ ¸

### 3. ç®¡ç†å‘˜åå°

è®¿é—® `https://ä½ çš„åŸŸå.netlify.app/admin.html`ï¼š

1. è¾“å…¥ä½ åœ¨ç¯å¢ƒå˜é‡ä¸­è®¾ç½®çš„ `ADMIN_PASSWORD`
2. ç‚¹å‡» **ç™»å½•**
3. æŸ¥çœ‹æäº¤åˆ—è¡¨ï¼š
   - **â³ å¾…å®¡æ ¸**ï¼šæ–°æäº¤çš„è¯—æ­Œ
   - **âœ… å·²é€šè¿‡**ï¼šå·²å‘å¸ƒåˆ°å‰ç«¯
   - **âŒ å·²æ‹’ç»**ï¼šæœªé€šè¿‡å®¡æ ¸
   - **ğŸ“‹ å…¨éƒ¨**ï¼šæ‰€æœ‰æäº¤è®°å½•
4. å®¡æ ¸æ“ä½œï¼š
   - ç‚¹å‡» **âœ… é€šè¿‡å¹¶å‘å¸ƒ**ï¼šè¯—æ­Œå°†ç«‹å³æ˜¾ç¤ºåœ¨å‰ç«¯
   - ç‚¹å‡» **âŒ æ‹’ç»**ï¼šæ ‡è®°ä¸ºå·²æ‹’ç»
5. ç‚¹å‡» **ğŸ”„ åˆ·æ–°åˆ—è¡¨** æŸ¥çœ‹æœ€æ–°æäº¤

### æ•°æ®æ ¼å¼

#### ç”¨æˆ·æäº¤æ ¼å¼

```json
{
  "author": "Pablo Neruda",
  "language": "en",
  "lines": [
    "Leaning into the afternoons I cast my sad nets",
    "towards your oceanic eyes."
  ],
  "translations": {
    "Leaning into the afternoons I cast my sad nets": "å€šèº«åœ¨æš®è‰²é‡Œï¼Œæˆ‘æœä½ æµ·æ´‹èˆ¬çš„åŒçœ¼æŠ•æ·æˆ‘å“€ä¼¤çš„ç½‘ã€‚"
  },
  "submitterName": "å¼ ä¸‰",
  "submitterEmail": "user@example.com",
  "status": "pending"
}
```

#### å·²å‘å¸ƒè¯—æ­Œæ ¼å¼

```json
{
  "poems": [
    {
      "author": "Pablo Neruda",
      "language": "en",
      "lines": [
        "Leaning into the afternoons I cast my sad nets towards your oceanic eyes."
      ],
      "translations": {
        "Leaning into the afternoons I cast my sad nets towards your oceanic eyes.": "å€šèº«åœ¨æš®è‰²é‡Œï¼Œæˆ‘æœä½ æµ·æ´‹èˆ¬çš„åŒçœ¼æŠ•æ·æˆ‘å“€ä¼¤çš„ç½‘ã€‚"
      },
      "publishedAt": "2025-10-06T12:00:00.000Z"
    }
  ],
  "updatedAt": "2025-10-06T12:00:00.000Z"
}
```

## ğŸ”§ API è¯´æ˜

### GET `/.netlify/functions/poems`

è·å–æ‰€æœ‰å·²å‘å¸ƒçš„è¯—æ­Œï¼ˆå‰ç«¯è‡ªåŠ¨è°ƒç”¨ï¼‰

**æƒé™**ï¼šå…¬å¼€è®¿é—®

**å“åº”ç¤ºä¾‹**ï¼š
```json
{
  "poems": [...],
  "updatedAt": "2025-10-06T12:00:00.000Z"
}
```

### POST `/.netlify/functions/submit-poem`

ç”¨æˆ·æäº¤è¯—æ­Œ

**æƒé™**ï¼šå…¬å¼€è®¿é—®

**è¯·æ±‚ä½“**ï¼š
```json
{
  "author": "ä½œè€…å",
  "lines": ["è¯—å¥1", "è¯—å¥2"],
  "language": "en",
  "translations": {},
  "submitterName": "æŠ•ç¨¿äºº",
  "submitterEmail": "email@example.com"
}
```

### GET `/.netlify/functions/get-submissions`

è·å–æ‰€æœ‰æäº¤è®°å½•ï¼ˆç®¡ç†å‘˜ä¸“ç”¨ï¼‰

**æƒé™**ï¼šéœ€è¦ Bearer Token

**è¯·æ±‚å¤´**ï¼š
```
Authorization: Bearer your-admin-password
```

### POST `/.netlify/functions/approve-poem`

å®¡æ ¸è¯—æ­Œï¼ˆç®¡ç†å‘˜ä¸“ç”¨ï¼‰

**æƒé™**ï¼šéœ€è¦ Bearer Token

**è¯·æ±‚ä½“**ï¼š
```json
{
  "submissionId": "submission_xxx",
  "action": "approve" // æˆ– "reject"
}
```

## ğŸ“ é¡¹ç›®ç»“æ„

```
LibraryofBabel/
â”œâ”€â”€ index.html              # å‰ç«¯ä¸»é¡µé¢
â”œâ”€â”€ submit.html             # ç”¨æˆ·æŠ•ç¨¿é¡µé¢
â”œâ”€â”€ admin.html              # ç®¡ç†å‘˜å®¡æ ¸åå°
â”œâ”€â”€ main.js                 # Three.js ä¸»é€»è¾‘
â”œâ”€â”€ package.json            # ä¾èµ–é…ç½®
â”œâ”€â”€ netlify.toml            # Netlify æ„å»ºé…ç½®
â”œâ”€â”€ netlify/
â”‚   â””â”€â”€ functions/
â”‚       â”œâ”€â”€ poems.js        # è¯»å–å·²å‘å¸ƒè¯—æ­Œ
â”‚       â”œâ”€â”€ submit-poem.js  # æ¥æ”¶ç”¨æˆ·æäº¤
â”‚       â”œâ”€â”€ get-submissions.js  # è·å–æäº¤åˆ—è¡¨ï¼ˆéœ€å¯†ç ï¼‰
â”‚       â”œâ”€â”€ approve-poem.js     # å®¡æ ¸æ“ä½œï¼ˆéœ€å¯†ç ï¼‰
â”‚       â””â”€â”€ save-poems.js       # æ‰‹åŠ¨ä¿å­˜ï¼ˆå·²å¼ƒç”¨ï¼‰
â”œâ”€â”€ models/                 # 3D æ¨¡å‹ï¼ˆå¯é€‰ï¼‰
â””â”€â”€ textures/               # çº¹ç†è´´å›¾ï¼ˆå¯é€‰ï¼‰
```

## ğŸ” å®‰å…¨è¯´æ˜

- âœ… ç”¨æˆ·æŠ•ç¨¿é¡µé¢ï¼š**å…¬å¼€è®¿é—®**ï¼Œä»»ä½•äººéƒ½å¯ä»¥æäº¤
- ğŸ”’ ç®¡ç†å‘˜åå°ï¼š**å¯†ç ä¿æŠ¤**ï¼Œéœ€è¦ `ADMIN_PASSWORD` ç¯å¢ƒå˜é‡
- âœ… å‰ç«¯å±•ç¤º APIï¼š**å…¬å¼€è®¿é—®**ï¼Œè‡ªåŠ¨è¯»å–å·²å‘å¸ƒå†…å®¹
- ğŸ”’ å®¡æ ¸ APIï¼š**éœ€è¦å¯†ç éªŒè¯**ï¼Œé˜²æ­¢æœªæˆæƒæ“ä½œ

**å®‰å…¨å»ºè®®**ï¼š
- è®¾ç½®å¼ºå¯†ç ï¼ˆè‡³å°‘ 12 ä½ï¼ŒåŒ…å«å¤§å°å†™å­—æ¯ã€æ•°å­—ã€ç¬¦å·ï¼‰
- ä¸è¦åœ¨ä»£ç ä¸­ç¡¬ç¼–ç å¯†ç 
- å®šæœŸæ›´æ¢ç®¡ç†å‘˜å¯†ç 
- å¯ç”¨ Netlify çš„è®¿é—®æ—¥å¿—ç›‘æ§å¼‚å¸¸ç™»å½•

## ğŸ› å¸¸è§é—®é¢˜

### Q: ç”¨æˆ·æäº¤å¤±è´¥ï¼Œæç¤º "Method not allowed"ï¼Ÿ
A: ç¡®ä¿å·²éƒ¨ç½²åˆ° Netlifyï¼Œæœ¬åœ°å¼€å‘éœ€ä½¿ç”¨ `netlify dev` è€Œé `npm run dev`ã€‚

### Q: ç®¡ç†å‘˜ç™»å½•å¤±è´¥ï¼Ÿ
A: æ£€æŸ¥ç¯å¢ƒå˜é‡ `ADMIN_PASSWORD` æ˜¯å¦æ­£ç¡®è®¾ç½®ï¼Œå¹¶é‡æ–°éƒ¨ç½²ç«™ç‚¹ã€‚

### Q: é€šè¿‡å®¡æ ¸åå‰ç«¯çœ‹ä¸åˆ°æ›´æ–°ï¼Ÿ
A: æ¸…é™¤æµè§ˆå™¨ç¼“å­˜æˆ–å¼ºåˆ¶åˆ·æ–°ï¼ˆCtrl+Shift+R / Cmd+Shift+Rï¼‰ã€‚

### Q: æœ¬åœ°å¼€å‘å¦‚ä½•æµ‹è¯• Netlify Functionsï¼Ÿ
A: ä½¿ç”¨ Netlify CLIï¼š
```bash
npm install -g netlify-cli
netlify dev
```

### Q: Blob Store å­˜å‚¨æœ‰å¤§å°é™åˆ¶å—ï¼Ÿ
A: Netlify å…è´¹ç‰ˆæä¾› 100MB Blob Store å­˜å‚¨ç©ºé—´ï¼Œè¶³å¤Ÿå­˜å‚¨å¤§é‡è¯—æ­Œæ–‡æœ¬ã€‚

### Q: å¦‚ä½•æ‰¹é‡å¯¼å…¥è¯—æ­Œï¼Ÿ
A: å¯ä»¥ç›´æ¥åœ¨ç®¡ç†åå°é€šè¿‡å®¡æ ¸ç”¨æˆ·æäº¤ï¼Œæˆ–ä½¿ç”¨ `save-poems.js` API æ‰¹é‡å¯¼å…¥ï¼ˆéœ€è¦ç®¡ç†å‘˜å¯†ç ï¼‰ã€‚

## ğŸ¯ åŠŸèƒ½è·¯çº¿å›¾

- [ ] é‚®ä»¶é€šçŸ¥æŠ•ç¨¿äººå®¡æ ¸ç»“æœ
- [ ] æ”¯æŒå›¾ç‰‡/éŸ³é¢‘é™„ä»¶
- [ ] å¤šè¯­è¨€ç•Œé¢ï¼ˆè‹±æ–‡/ä¸­æ–‡åˆ‡æ¢ï¼‰
- [ ] è¯—æ­Œæœç´¢åŠŸèƒ½
- [ ] å¯¼å‡º/å¯¼å…¥åŠŸèƒ½
- [ ] ç”¨æˆ·æ³¨å†Œä¸ä¸ªäººä¸­å¿ƒ

## ğŸ“ è®¸å¯è¯

MIT License

## ğŸ¤ è´¡çŒ®

æ¬¢è¿æäº¤ Issue å’Œ Pull Requestï¼

---

**åœ¨çº¿æ¼”ç¤º**: https://libraryofbable.netlify.app  
**ç”¨æˆ·æŠ•ç¨¿**: https://libraryofbable.netlify.app/submit.html  
**ç®¡ç†åå°**: https://libraryofbable.netlify.app/admin.html
